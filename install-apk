#install

echo

pre_file_path=`cat _install-apk_pre_info`
echo "上一个文件路径：$pre_file_path"

# 参数-n的作用是不换行，echo默认换行
echo -n "拖入文件或者回车使用上一个文件路径:"    
# 把键盘输入放入变量               
read  file_path    


func_device(){
	devices_result="$(adb  devices)"

	echo "---$devices_result"
	# 通过空格分割字符串
	array=(${devices_result// /})

	length=${#array[*]}
	# 长度大于2表示已经连接有设备，获取第一个设备就行
	if [ $length -gt 2 ]
	then
		connect_device=${array[1]}
		echo "connect_device  $connect_device \n"	
		
	else
		echo "no devices connected"
	fi
}
func_device


if [[ -n "$file_path" ]]
then
    final_file_path=$file_path
else
    final_file_path=$pre_file_path
fi

echo "$final_file_path" > _install-apk_pre_info
adb -s $connect_device install -r -t -d "$final_file_path"
echo